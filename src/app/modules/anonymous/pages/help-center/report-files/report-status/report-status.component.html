<app-banner
  title="{{ 'BANNERS.HELP_CENTER' | translate }}"
  img="/assets/img/banners/centro-ayuda-pc.jpg"
  imgMobile="/assets/img/banners/centro-ayuda-mobile.jpg"
></app-banner>
<div class="container">
  <div fxLayout.gt-xs="row" fxLayoutGap.gt-xs="30px" ngClass.gt-xs="mt-3">
    <span fxHide.gt-xs="true">
      <button mat-button [routerLink]="['/centro-de-ayuda/reportar']">
        <span class="galano-bold f-16" fxLayout="row" fxLayoutAlign="start center">
          <mat-icon>keyboard_arrow_left</mat-icon>
          {{ 'BUTTONS.BACK' | translate }}
        </span>
      </button>
    </span>
    <div fxLayout.gt-xs="column" fxFlex.gt-xs="25" fxShow.gt-xs="true" fxShow.xs="false">
      <app-menu-help-center></app-menu-help-center>
    </div>
    <div fxLayout.gt-xs="column" class="mt-3">
      <div fxLayout="row" fxLayoutGap="10px">
        <mat-card class="mat-card-box-shadow">
          <div fxLayout="row" fxLayoutGap="10px" class="report-news">
            <img src="/assets/img/ayuda/reportar-novedad/icon-reportar-novedad.svg" alt="" />
            <h3>Estado de novedades</h3>
          </div>
          <div class="card-report-dark mt-3">
            <p class="margin-zero-top">
              El tiempo de respuesta para cada novedad puede tomar hasta 15 días hábiles después de reportada la novedad o desde que se
              notifique un rechazo por parte del banco al realizar el pago.
            </p>
          </div>
          <h3 *ngIf="!dataSourceNews" class="bold-report">No tienes novedades reportadas.</h3>
          <div class="panel-spacing mt-3">
            <mat-accordion>
              <mat-expansion-panel
                class="expansion-panel-box-shadow"
                *ngFor="let item of dataSourceNews; let i = index"
                (closed)="stepIni(-1)"
                (opened)="stepIni(i)"
              >
                <mat-expansion-panel-header>
                  <mat-panel-title class="between-datas">
                    <div fxLayout="column" class="padding-mobile mr-4">
                      <p class="mt-0 mb-1 radications-p">NO. DE RADICADO</p>
                      <span class="span-data">{{ item.consecutive }}</span>
                    </div>
                    <div fxLayout="column" class="mr-4" fxShow.gt-xs="true" fxShow.xs="false">
                      <p class="mt-0 mb-1 radications-p">FECHA DE REPORTE</p>
                      <span class="norma-data">{{ item.date | date: 'dd/MM/yyyy' }}</span>
                    </div>
                    <div fxLayout="column" class="mr-4" fxShow.gt-xs="true" fxShow.xs="false">
                      <p class="mt-0 mb-1 radications-p">FECHA DE CIERRE</p>
                      <span class="norma-data">{{ item.solutiondate | date: 'dd/MM/yyyy' }}</span>
                    </div>
                    <div fxLayout="column" class="mr-4 size-status" fxShow.gt-xs="true" fxShow.xs="false">
                      <p class="mt-0 mb-0 radications-p">ESTADO</p>
                      <span *ngIf="item.statusnovelty === 'Pendiente'" class="norma-data"
                      ><img class="status-img" src="/assets/img/dashboard/icon-info.svg" alt="pendind" /><span> Pendiente</span></span
                    >
                    <span *ngIf="item.statusnovelty === 'Pendiente de documentación'" class="norma-data"
                      ><img class="status-img" src="/assets/img/dashboard/document_text.svg" alt="pendind" />
                      <span>Pendiente de documentación</span></span
                    >
                    <span *ngIf="item.statusnovelty === 'Solucionado'" class="norma-data"
                      ><img class="status-img" src="/assets/img/dashboard/icon-check-new.svg" alt="pendind" /> <span>Solucionado</span></span
                    >
                    <span *ngIf="item.statusnovelty === 'Solución parcial'" class="norma-data"
                      ><img class="status-img" src="/assets/img/dashboard/icon-check-partial.svg" alt="pendind" />
                      <span>Solución parcial</span></span
                    >
                    <span *ngIf="item.statusnovelty === 'En gestión'" class="norma-data"
                      ><img class="status-img" src="/assets/img/dashboard/icon-revision.svg" alt="pendind" /> <span>En gestión</span></span
                    >
                    </div>
                    <div fxLayour="column">
                      <p [class]="selectedInic === i ? 'data-detail-color' : 'data-details'">Detalles</p>
                    </div>
                  </mat-panel-title>
                </mat-expansion-panel-header>
                <div class="mb-2" fxLayout="row">
                  <div fxLayout="column" class="mr-4 margin-mobile" fxShow.gt-xs="false" fxShow.xs="true">
                    <p class="mt-0 mb-0 radications-p">FECHA DE REPORTE</p>
                    <span class="norma-data">{{ item.date | date: 'dd/MM/yyyy' }}</span>
                  </div>

                  <div fxLayout="column" class="mr-4 margin-mobile" fxShow.gt-xs="false" fxShow.xs="true">
                    <p class="mt-0 mb-0 radications-p">FECHA DE CIERRE</p>
                    <span class="norma-data">{{ item.solutiondate | date: 'dd/MM/yyyy' }}</span>
                  </div>
                </div>
                <div fxLayout="column" class="mr-4 mb-3" fxShow.gt-xs="false" fxShow.xs="true">
                  <p class="mt-0 mb-0 radications-p">ESTADO</p>

                  <span *ngIf="item.statusnovelty === 'Pendiente'" class="norma-data"
                    ><img class="status-img" src="/assets/img/dashboard/icon-info.svg" alt="pendind" /><span> Pendiente</span></span
                  >
                  <span *ngIf="item.statusnovelty === 'Pendiente de documentación'" class="norma-data"
                    ><img class="status-img" src="/assets/img/dashboard/document_text.svg" alt="pendind" />
                    <span>Pendiente de documentación</span></span
                  >
                  <span *ngIf="item.statusnovelty === 'Solucionado'" class="norma-data"
                    ><img class="status-img" src="/assets/img/dashboard/icon-check-new.svg" alt="pendind" /> <span>Solucionado</span></span
                  >
                  <span *ngIf="item.statusnovelty === 'Solución parcial'" class="norma-data"
                    ><img class="status-img" src="/assets/img/dashboard/icon-check-partial.svg" alt="pendind" />
                    <span>Solución parcial</span></span
                  >
                  <span *ngIf="item.statusnovelty === 'En gestión'" class="norma-data"
                    ><img class="status-img" src="/assets/img/dashboard/icon-revision.svg" alt="pendind" /> <span>En gestión</span></span
                  >
                </div>
                <div fxLayout="column">
                  <p class="mt-0 mb-0 radications-p">DESCRIPCIÓN DE LA NOVEDAD</p>
                  <span class="text-description">{{ item.description }}</span>
                </div>

                <div fxLayout="column">
                  <p class="mb-0 radications-r">respuesta a novedad</p>
                  <!-- <span class="text-description">{{ item.responsenovelty }}</span> -->
                  <div [innerHtml]="item.responsenovelty"></div>
                </div>

                <div fxLayout="column" *ngIf="item.responsedocumenturl">
                  <p class="mt-0 mb-0 radications-p">DOCUMENTO ADJUNTO</p>
                  
                  <div fxLayout="row">
                    <i class="tio-link style-icon"></i>
                    <a href="{{ item.responsedocumenturl }}">
                      <span class="document__link">
                        {{ item.responsedocumenturl.split('/')[item.responsedocumenturl.split('/').length-1] }}
                      </span>
                    </a>
                  </div>
                </div>

                <div class="status-novelty" fxLayout="column" *ngIf="item.statusnovelty === 'Solucionado'">
                  <p>¿Cómo fue tu experiencia en esta novedad?</p>
                  <div class="emoji-status">
                    <form>
                      <input
                        type="radio"
                        value="1"
                        name="status"
                        [disabled]="item?.qualification"
                        class="cry"
                        (click)="opeModalStatus($event.target.value, item)"
                        [checked]="item?.qualification === 1"
                      />
                      <input
                        type="radio"
                        value="2"
                        name="status"
                        [disabled]="item?.qualification"
                        class="sad"
                        (click)="opeModalStatus($event.target.value, item)"
                        [checked]="item?.qualification === 2"
                      />
                      <input
                        type="radio"
                        value="3"
                        name="status"
                        [disabled]="item?.qualification"
                        class="happy"
                        (click)="opeModalStatus($event.target.value, item)"
                        [checked]="item?.qualification === 3"
                      />
                      <input
                        type="radio"
                        value="4"
                        name="status"
                        [disabled]="item?.qualification"
                        class="love"
                        (click)="opeModalStatus($event.target.value, item)"
                        [checked]="item?.qualification === 4"
                      />
                    </form>
                  </div>
                </div>
              </mat-expansion-panel>
            </mat-accordion>
          </div>
        </mat-card>
      </div>
    </div>
  </div>
</div>
