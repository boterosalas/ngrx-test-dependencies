<!-- logged section -->

<section *ngIf="auth.isLoggedIn()">
  <!-- stories clickam looged -->
  <div class="container-fluid my-3">
    <app-slider-stories></app-slider-stories>
  </div>

  <div class="container-fluid py-3">
    <app-image
      fxHide.xs="true"
      imageClass="cursor-pointer w-100 my-3"
      src="/assets/img/home/gana.png"
      alt="negocios"
    ></app-image>
    <app-image
      fxHide.gt-xs="true"
      width="324"
      height="77"
      imageClass="cursor-pointer w-100"
      src="/assets/img/home/gana-mobile.png"
      alt="negocios"
    ></app-image>
  </div>

  <div class="container-fluid">
    <div fxFlex="100" fxLayout="row" fxLayout.xs="column" fxLayoutGap="20px">
      <mat-card fxFlex.gt-xs="33" class="card mat-card-box-shadow cursor-pointer" [routerLink]="['/reportes']">
        <app-sales-info></app-sales-info>
      </mat-card>

      <mat-card fxFlex.gt-xs="33" class="card mat-card-box-shadow">
        <app-title showTitleh3="true" text="INVITA Y GANA"></app-title>
        <input class="mb-4" id="urlLink" matInput [value]="url" #linkInput readonly />
        <br />
        <span fxLayout="row">
          <div fxHide.xs="true" class="share-desktop w-100" id="share" fxLayout="row" fxLayoutAlign="space-around" fxLayoutGap="20px">
            <div fxLayout="column">
              <div fxLayout="row" fxLayoutGap="10px">
                <span class="share-refer gtmRfiereYGanaClicReferirwhatsapp" fxLayout="column" fxFlex="33" fxLayoutAlign="center center">
                  <a
                    (click)="generateLink()"
                    href="https://web.whatsapp.com/send?text={{ urlWhatsapp }}"
                    target="_blank"
                    data-action="share/whatsapp/share"
                    ngClass="shared gtmRfiereYGanaClicReferirwhatsapp"
                  >
                    <i ngClass="fab fa-whatsapp gtmRfiereYGanaClicReferirwhatsapp"></i>
                  </a>
                </span>

                <span class="share-refer gtmRfiereYGanaClicReferirFacebook" fxLayout="column" fxFlex="33" fxLayoutAlign="center center">
                  <button
                    theme="circles-dark"
                    shareButton="facebook"
                    [url]="url"
                    ngClass="shared mr-2 gtmRfiereYGanaClicReferirFacebook"
                    (click)="generateLink()"
                  >
                    <i ngClass="fab fa-facebook-f gtmRfiereYGanaClicReferirFacebook"></i>
                  </button>
                </span>

                <span class="share-refer gtmRfiereYGanaClicReferirTwitter" fxLayout="column" fxFlex="33" fxLayoutAlign="center center">
                  <button
                    theme="circles-dark"
                    shareButton="twitter"
                    [url]="url"
                    (click)="generateLink()"
                    ngClass="shared mr-2 gtmRfiereYGanaClicReferirTwitter"
                  >
                    <i ngClass="fab fa-twitter gtmRfiereYGanaClicReferirTwitter"></i>
                  </button>
                </span>
              </div>
            </div>
            <div fxLayout="column">
              <button mat-raised-button color="orange" class="px-5 gtmPanelInvitaYGanaCopiarLink" (click)="copyLink(linkInput)">
                Copiar enlace
              </button>
            </div>
          </div>

          <div class="share-mobile w-100" fxHide.gt-xs="true">
            <button class="button button-100 button-height f-16" mat-raised-button id="ShareInvite" color="orange" (click)="share(url)">
              <span class="px-3" fxLayout="row" fxLayoutAlign="space-between">
                {{ 'REFER.SEND_INVITATION' | translate }}
                <img loading="lazy" src="/assets/img/share/compartir-button.svg" alt="share-button" />
              </span>
            </button>
          </div>
        </span>
      </mat-card>

      <mat-card fxFlex.gt-xs="33" class="card mat-card-box-shadow"> 
        <div fxLayout="row" fxLayoutAlign="space-between center">
          <app-title showTitleh3="true" text="PASO A PASO"></app-title>
          <span class="text-secondary underline cursor-pointer" [routerLink]="['/negocios']">Ver más</span>
        </div>
        <div class="connected-steps px-3" *ngIf="missions.length">
          <div class="step-active">1</div>
          
          <div class="connector"></div>
          <div [ngClass]="missions[3].status || missions[5].status ? 'step-active' : 'step'">2</div>
          <div class="connector"></div>
          <div [ngClass]="missions[3].status || missions[5].status ? 'step-active' : 'step'">3</div>
        </div>
        <div fxLayout="row" fxLayoutAlign="space-between center">
          <p>Ingresar</p>
          <p>Comprar o referir</p>
          <p>Ganar</p>
        </div>
      </mat-card>
    </div>
  </div>

  <section fxLayout="row" fxLayout.xs="column" class="container-fluid mt-4 mb-4" fxLayoutGap="20px">
    <div fxLayout="column" fxFlex="100" fxFlex.xs="100" fxLayoutGap="20px">
      <mat-card class="card mat-card-box-shadow">
        <div>
          <div>
            <span class="d-block"></span>
            <app-title showTitleh3="true" text="OFERTAS"></app-title>
          </div>
        </div>

        <app-slider
          Class="gtmHomeCarruselOfertas"
          [showArrows]="false"
          [isSlider]="true"
          (action)="sliderOffers()"
          [sliderWeb]="offersWeb"
          [slideConfig]="slideConfigProductsLogged"
          class="mb-3"
        ></app-slider>
      </mat-card>
    </div>
  </section>

  <section fxLayout="row" fxLayout.xs="column" class="container-fluid mt-4 mb-4" fxLayoutGap="20px">
    <div fxLayout="column" fxFlex="100" fxFlex.xs="100" fxLayoutGap="20px">
      <mat-card class="card mat-card-box-shadow">
        <div>
          <div>
            <span class="d-block"></span>
            <app-title showTitleh3="true" text="NEGOCIOS ALIADOS"></app-title>
          </div>
        </div>

        <app-business-list></app-business-list>

      </mat-card>
    </div>
  </section>
</section>

<!-- anonymous section -->

<section *ngIf="!auth.isLoggedIn()">
  <!-- welcome  -->

  <div class="container-fluid bg-welcome py-5">
    <app-welcome
      title="¡Bienvenido a Clickam!"
      subtitle="Crea links, comparte y ¡gana!"
      text="Porque en Clickam podrás ahorrar con tus compras y ganar dinero recomendando los productos que más te gustan."
      [buttonHome]="true"
    ></app-welcome>
  </div>

  <!-- slider business -->

  <div class="container-fluid py-4 bg-white">
    <app-title showTitleh3="true" text="GANANCIAS POR COMPRAR O REFERIR" class="text-center"></app-title>
    <app-slider-share (click)="openRegister()" [slider]="bussiness" [slideConfig]="slideConfig"></app-slider-share>
  </div>

  <!-- image -->
  <div class="container py-5">
    <app-image
      fxHide.xs="true"
      imageClass="cursor-pointer w-100"
      src="/assets/img/home/gana.png"
      alt="negocios"
    ></app-image>

    <app-image
      fxHide.gt-xs="true"
      width="324"
      height="77"
      imageClass="cursor-pointer w-100"
      src="/assets/img/home/gana-mobile.png"
      alt="negocios"
    ></app-image>
  </div>

  <span fxLayout="column" fxHide.gt-xs="true" class="py-3">
    <app-image imageClass="w-100" width="436" height="232" src="/assets/img/home/data.png" alt="clickam-app"></app-image>
  </span>

  <!-- works -->

  <div class="container py-3">
    <div class="card-style p-3">
      <app-title showTitleh3="true" text="¿Cómo funciona Clickam?" class="text-center"></app-title>

      <div fxLayout.gt-xs="row" fxLayout="column" fxLayoutAlign="space-between center">
        <span fxLayout="row" fxLayoutGap="5px">
          <app-image width="64" height="64" src="/assets/img/home/icon-step1.svg" alt="compra"></app-image>
          <p>Compra o refiere a través de Clickam.</p>
        </span>

        <span fxLayout="row" fxLayoutGap="5px">
          <app-image width="64" height="64" src="/assets/img/home/icon-step2.svg" alt="compra"></app-image>
          <p>Te devolvemos un porcentaje de la transacción.</p>
        </span>

        <span fxLayout="row" fxLayoutGap="5px">
          <app-image width="64" height="64" src="/assets/img/home/icon-step3.svg" alt="compra"></app-image>
          <p>Recibe las comisiones en tu cuenta bancaria.</p>
        </span>
      </div>
    </div>
  </div>

  <!-- slider top products -->

  <div class="container py-3">
    <div class="card-style p-3">
      <span class="d-block"></span>
      <app-title showTitleh3="true" text="{{ 'HOME.OFFERS' | translate }}"></app-title>
      <p class="f-16 galano">{{ 'HOME.OFFERS_TEXT' | translate }}</p>

      <app-slider
        Class="gtmHomeCarruselTopDeProductos"
        [showArrows]="false"
        [isSlider]="true"
        (action)="sliderOffers()"
        [sliderWeb]="topProducts"
        class=""
      ></app-slider>
    </div>
  </div>

  <!-- testimonials -->

  <div class="container py-3">
    <div ngClass.gt-xs="card-style p-3">
      <app-title showTitleh3="true" text="Lo que dicen de nosotros" class="text-center"></app-title>
      <app-slide-testimonials [slider]="testimonials" [slideConfig]="slideConfigTestimonials"></app-slide-testimonials>
    </div>
  </div>

  <!-- modal promo template -->

  <ng-template #templatePromo>
    <div fxShow.gt-xs="true" fxShow.xs="false">
      <a [href]="modalHref" [target]="modalTarget">
        <img loading="lazy" [src]="modalSrcWeb" class="img-responsive w-100 cursor-pointer" [alt]="modalAltWeb" />
      </a>
    </div>

    <div fxShow.gt-xs="false" fxShow.xs="true">
      <a [href]="modalHref" [target]="modalTarget">
        <img loading="lazy" [src]="modalSrcMobile" class="img-responsive w-100 cursor-pointer" [alt]="modalAltMobile" />
      </a>
    </div>
  </ng-template>

  <!-- modal ingreso clickam -->

  <ng-template #templateClickamWay>
    <div [fxLayout]="direction" [fxLayout.xs]="directionMobile" fxLayoutGap="20px">
      <span class="image">
        <app-image [src]="imageWay" [alt]="titleWay"></app-image>
      </span>
      <span>
        <app-title showTitleh3="true" [text]="titleWay"></app-title>
        <p>{{ textWay }}</p>
        <app-button
          *ngIf="showWay"
          [title]="nameButton"
          (action)="routeWay()"
          [haveIcon]="false"
          class="bp"
          classButton="shadow-purple"
        ></app-button>
      </span>
    </div>
  </ng-template>
</section>
