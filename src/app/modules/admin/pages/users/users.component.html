<app-banner
  title="{{ 'USERS.USERS' | translate}}"
  img="/assets/img/banners/banner-dashboard-pc.jpg"
  imgMobile="/assets/img/banners/banner-dashboard-mobile.jpg"
></app-banner>

<div class="container m-t4 fade-in">
    
    <!-- <h1 class="border-bottom-orange-init">{{ 'USERS.USERS' | translate}}</h1> -->
    <div class="mt-4" fxLayout="row">
    <div class="">
    <p class="mt-0">Elige un rango de fechas para exportar usuarios</p>
    
    <form
        [formGroup]="dateForm"
        class="downloadUsers user-transactions"
        >
            <mat-icon class="icon-date" matPrefix>date_range</mat-icon>
            <input (change)="change()" formControlName="dateRange" [locale]="locale" placeholder="Seleccione fechas" type="text" [maxDate]="maxDate"  ngxDaterangepickerMd class="form-control border-input mat-elevation-z1 p-2 border-radius"/>
            <button mat-raised-button color="orange" (click)="getUserExcel()" id="download-users" class="ml-2" [disabled]="!dateForm.valid || disButon">Exportar <img class="icon-download" src="assets/img/dashboard/descarga.svg" alt="descarga"></button>
    </form>
  </div>
  <div class="border-separators ">
    <p class="mt-0">Reporte Cambio de Datos Bancarios</p>
    <form
        [formGroup]="dateReportChangeForm"
        class="downloadUsers user-transactions"
        >
            <mat-icon class="icon-date" matPrefix>date_range</mat-icon>
            <input (change)="change()" formControlName="dateRange" [locale]="locale" placeholder="Seleccione fechas" type="text" [maxDate]="maxDate"  ngxDaterangepickerMd class="form-control border-input mat-elevation-z1 p-2 border-radius"/>
            <button mat-raised-button color="orange" (click)="getReportChangeExcel()" id="download-users" class="ml-2" [disabled]="!dateReportChangeForm.valid || disButon">Exportar <img class="icon-download" src="assets/img/dashboard/descarga.svg" alt="descarga"></button>
    </form>
  </div>
  <div class="container-search">
    <app-search-users class="searchUser" (search)="searchUser($event)"></app-search-users>
  </div>
</div>
    <div fxLayout="row" fxLayoutAlign="space-between center">
      <!-- <button mat-raised-button color="orange" (click)="updateEmployee()">Actualizar Usuarios</button> -->
      <button mat-raised-button color="orange" (click)="exportusers()">Exportar usuarios externos <img class="icon-download" src="assets/img/dashboard/descarga.svg" alt="descarga"></button>
      
    </div>

    <div id="users-table">
        <app-table-users (dataUser)="userData($event)" (dataEmail)="userEmail($event)" [dataSource]="dataSource" (sortDataUser)="sort($event)"></app-table-users>
        <mat-paginator
        [length]="totalItems"
            [pageSize]="pageSize"
            [pageSizeOptions]="[50]"
            [pageIndex]="pageIndex"
            (page)="pagination($event)"
       ></mat-paginator>
    </div>
</div>

<!-- template Email-->

<ng-template #templateDialogEmail>
    <form [formGroup]="emailForm" fxLayout="column" fxFlex="100" class="formw">
        <mat-form-field>
            <input
              matInput
              id="email"
              type="email"
              placeholder="{{ 'GENERIC.EMAIL' | translate }}"
              formControlName="email"
              spacebar
              required
            />
            <span matPrefix><mat-icon color="gray">person</mat-icon></span>
            <mat-error id="introduceEmail" *ngIf="emailForm.controls.email.invalid && emailForm.controls.email.errors.required">{{
              "LOGIN.INTRODUCE_EMAIL" | translate
            }}</mat-error>
            <mat-error id="invalidEmail" *ngIf="emailForm.controls.email.invalid && emailForm.controls.email.errors.pattern">{{
              "LOGIN.INVALID_EMAIL" | translate
            }}</mat-error>
          </mat-form-field>
      <button
        mat-raised-button
        id="editProfile"
        class="center button button-100 mt-4"
        color="orange"
        (click)="changeEmail()"
        [disabled]="!emailForm.valid"
      >
        {{ "GENERIC.SAVE" | translate }}
      </button>
    </form>
  </ng-template>
  