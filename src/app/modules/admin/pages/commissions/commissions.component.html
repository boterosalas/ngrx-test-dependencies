<app-banner
  title="Comisiones"
  img="/assets/img/banners/banner-dashboard-pc.jpg"
  imgMobile="/assets/img/banners/banner-dashboard-mobile.jpg"
></app-banner>
<div class="container m-t4 fade-in">
  <!-- <div class="mt-4 container-forms" fxLayout="row">
    <div class="ml-4 downloadUsers user-transactions">
      <form class="form-relative" [formGroup]="dateForm">
        <div fxLayout="column">
          <label class="label-up-text" for="picker">RANGO DE FECHAS</label>
          <div fxLayout="row">
            <i class="tio-date_range icon-date"></i>
            <input
              formControlName="dateRange"
              [locale]="locale"
              placeholder="Seleccione fechas"
              type="text"
              [maxDate]="maxDate"
              ngxDaterangepickerMd
              class="form-control border-input mat-elevation-z1 p-2 border-radius"
            />
          </div>
        </div>
      </form>
    </div>
    <div class="container-search">
      <div fxLayout="row" fxLayoutAlign="end end">
        <div fxLayout="column" fxFlex="100">
          <app-search-users
            class="searchCommission"
            (search)="searchCommission($event)"
          ></app-search-users>
        </div>
      </div>
    </div>
  </div>
  <div class="mat-elevation-z0 mt-4 mb-4">
    <table
      mat-table
      [dataSource]="dataSource"
      class="users-table"
      matSort
      (matSortChange)="sortCommission($event)"
    >
      <ng-container matColumnDef="idclicker">
        <th
          mat-header-cell
          class="pl-3"
          *matHeaderCellDef
          style="width: 9%"
          mat-sort-header="consecutive"
        >
        Cédula
        </th>
        <td mat-cell *matCellDef="let element" class="pl-3">
          <p
            class="m-0 gray-light text-link cursor-pointer"
            (click)="openDialog(element)"
          >
            {{ element.consecutive }}
          </p>
        </td>
      </ng-container>
      <ng-container matColumnDef="subscription">
        <th
          class="left-text"
          mat-header-cell
          *matHeaderCellDef
          style="width: 12%; text-align: left"
          mat-sort-header="date"
        >
          nombre usuario
        </th>
        <td mat-cell *matCellDef="let element" class="text-font">
          {{ element.date | date: "dd/MM/yyyy" }}
        </td>
      </ng-container>
      <ng-container matColumnDef="users">
        <th
          mat-header-cell
          *matHeaderCellDef
          style="width: 15%"
          mat-sort-header="name"
        >
          id usuario
        </th>
        <td mat-cell *matCellDef="let element: let i=index">
          <p class="m-0 gray-light text-font">{{ element.name }}</p>
        </td>
      </ng-container>
      <ng-container matColumnDef="identification">
        <th
          mat-header-cell
          *matHeaderCellDef
          style="width: 10%"
          mat-sort-header="identification"
        >
          fecha comisión
        </th>
        <td mat-cell *matCellDef="let element: let i=index">
          <p class="m-0 gray-light text-font-cc">
            {{ element.identification }}
          </p>
        </td>
      </ng-container>
      <ng-container matColumnDef="cellphone">
        <th
          mat-header-cell
          *matHeaderCellDef
          style="width: 10%"
          mat-sort-header="cellphone"
        >
          id comisión
        </th>
        <td mat-cell *matCellDef="let element" class="text-font">
          {{ element.cellphone }}
        </td>
      </ng-container>
      <ng-container matColumnDef="email">
        <th
          mat-header-cell
          *matHeaderCellDef
          style="width: 15%"
          mat-sort-header="email"
        >
          negocio
        </th>
        <td mat-cell *matCellDef="let element: let i = index">
          <span
            class="text-font"
            fxLayout="row"
            fxLayoutAlign="space-between space-between"
          >
            {{ element.email }}
          </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="status">
        <th
          mat-header-cell
          *matHeaderCellDef
          style="width: 10%"
          mat-sort-header="status"
        >
          producto
        </th>
        <td mat-cell *matCellDef="let element: let i = index">
          <span
            class="text-font"
            fxLayout="row"
            fxLayoutAlign="space-between space-between"
          >
            {{ element.email }}
          </span>
        </td>
      </ng-container>
      <ng-container matColumnDef="status">
        <th
          mat-header-cell
          *matHeaderCellDef
          style="width: 10%"
          mat-sort-header="status"
        >
          No. orden
        </th>
        <td mat-cell *matCellDef="let element: let i = index">
          <span
            class="text-font"
            fxLayout="row"
            fxLayoutAlign="space-between space-between"
          >
            {{ element.email }}
          </span>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr
        id="user-{{ i }}"
        mat-row
        *matRowDef="let row; columns: displayedColumns; let i = index"
      ></tr>
    </table>
    <div class="mt-3">
      <mat-paginator
        [length]="totalItems"
        [pageSize]="pageSize"
        [pageSizeOptions]="[50]"
        [pageIndex]="pageIndex"
        (page)="pagination($event)"
      ></mat-paginator>
    </div>
  </div> -->
  <div class="import-files">
    <h3>Importar archivo de comisiones</h3>
    <div class="upload-files">
      <span>
        <label for="rejected" class="button-selected-label cursor-pointer">
          Comisiones rechazadas
          <i
            class="tio-upload_on_cloud style-icon icon-update icon-download-file"
          ></i>
        </label>
        <input
          #inputFile
          (change)="handleFileInput($event, 'rejected')"
          id="rejected"
          type="file"
          multiple
        />
      </span>
      <span>
        <label for="eliminated" class="button-selected-label cursor-pointer">
          Comisiones eliminadas
          <i
            class="tio-upload_on_cloud style-icon icon-update icon-download-file"
          ></i>
        </label>
        <input
          #inputFile
          (change)="handleFileInput($event, 'eliminated')"
          id="eliminated"
          type="file"
          multiple
        />
      </span>
    </div>
    <div class="download-files">
      <button (click)="getReportRejected()" class="button-selected-label cursor-pointer">
        Exportar
        <i
          class="tio-download_from_cloud style-icon icon-update icon-download-file"
        ></i>
      </button>
    </div>
  </div>
</div>
