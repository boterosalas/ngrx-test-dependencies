
<div fxLayout="row" fxLayoutGap="15px" class="mb-3 mt-3">
    <div fxLayout="column" fxFlex="70">
        <table mat-table #table class="mat-elevation-z2"  
        [dataSource]="dataSource" 
        cdkDropList
        [cdkDropListData]="dataSource"
        (cdkDropListDropped)="dropTable($event)">
            <ng-container matColumnDef="drag">
                <th mat-header-cell *matHeaderCellDef> </th>
                <td mat-cell *matCellDef="let element;let i= index" > 
                    <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign.gt-xs="end center" fxLayoutAlign.xs="center center">
                        <mat-icon  matSuffix class="mr-1 blue cursor-pointer" cdkDragHandle>drag_indicator</mat-icon>
                    </div>
                </td>
            </ng-container>
            <ng-container matColumnDef="bussiness">
                <th mat-header-cell *matHeaderCellDef> {{ 'DASHBOARD.NEW_BUSINESS' | translate }} </th>
                <td mat-cell *matCellDef="let element"> 
                    <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign.gt-xs="start center" fxLayoutAlign.xs="center center">
                        <span fxLayout="column">
                            <img class="iconb" [src]="element.imageurl" [alt]="element.description">
                        </span>
                        <span fxLayout="column" class="galano-bold f-16" fxHide.xs="true">
                            {{ element.description }}
                        </span>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="activate">
                <th mat-header-cell class="tr" *matHeaderCellDef> ACTIVO / INACTIVO </th>
                <td mat-cell *matCellDef="let element;let i= index"> 
                    <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign.gt-xs="end center" fxLayoutAlign.xs="center center">
                        <mat-slide-toggle [(ngModel)]="element.active" color="orange2-toggle" (change)="activate(element)"></mat-slide-toggle>
                    </div>
                </td>
            </ng-container>
            <ng-container matColumnDef="category">
                <th mat-header-cell  *matHeaderCellDef class="center-text"> CONFIGURAR </th>
                <td mat-cell *matCellDef="let element;let i= index"> 
                    <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign.gt-xs="center" fxLayoutAlign.xs="center center">
                        
                        <mat-menu #menu="matMenu" xPosition="before">
                          <button mat-menu-item (click)="editCategory(element)">Categorías</button>
                          <button mat-menu-item (click)="contentBussiness(element)">Biblioteca de Contenido</button>
                          <button mat-menu-item (click)="comisionTable(element)">Comisiones</button>
                        </mat-menu>
                        <button mat-button [matMenuTriggerFor]="menu"><img class="cursor-pointer "   src="/assets/img/dashboard/icon-settings.svg" alt=""></button>    
                    </div>
                </td>
            </ng-container>
            
              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;let i= index" cdkDrag [cdkDragData]="row"></tr>
        </table>
    </div>

</div>
<ng-template #templateComision>
    <div ngClass="comision-container" >
        <table mat-table #table2  cdkDropList
        [dataSource]="dataComision" 
        [cdkDropListData]="dataComision"
        (cdkDropListDropped)="dropTableComision($event)">
        <ng-container matColumnDef="drag">
            <th class="header-color-cell-ini" mat-header-cell *matHeaderCellDef> </th>
            <td class="pt-2" mat-cell *matCellDef="let element;let i= index" > 
                <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign.gt-xs="end center" fxLayoutAlign.xs="center center">
                    <mat-icon  matSuffix class="mr-1 blue cursor-pointer" cdkDragHandle>drag_indicator</mat-icon>
                </div>
            </td>
        </ng-container>
        <ng-container matColumnDef="bussiness">
            <th class="header-color-cell" mat-header-cell *matHeaderCellDef> CATEGORÍA DE PRODUCTO </th>
            <td class="pt-2" mat-cell *matCellDef="let element"> 
                <mat-form-field [id]="description+i" style="width: 490px;">
                    <textarea
                        matInput
                        placeholder="NOMBRE"
                        [id]="description+i"
                        type="text"
                        [(ngModel)]="element.description"
                        (ngModelChange)="validation(element.description)"
                        required
                        class="text-area-heigth"
                        style="height: 50px;"
                    ></textarea>  
                </mat-form-field>
            </td>
        </ng-container>
        <ng-container matColumnDef="comision">
            <th class="header-color-cell" mat-header-cell *matHeaderCellDef> COMISIÓN </th>
            <td class="pt-2" mat-cell *matCellDef="let element"> 
                <mat-form-field style="width: 90px;">
                    <input
                    style="height: 50px;"
                      matInput
                      [id]="category+i"
                      type="text"
                      placeholder="COMISIÓN"
                      [(ngModel)]="element.commission"
                      (ngModelChange)="validation(element.description)"
                      required
                    />
                </mat-form-field>
            </td>
        </ng-container>
        <ng-container matColumnDef="button">
            <th class="header-color-cell-fin" mat-header-cell *matHeaderCellDef> ACCIONES </th>
            <td class="pt-2" mat-cell *matCellDef="let element;let i= index"> 
                <button class="button-delete-comision" mat-button (click)="deleteComision(element, i)" ><img class="cursor-pointer "   src="/assets/img/dashboard/icon-remove-comision.svg" alt=""></button>
            </td>
        </ng-container>
        <tr class="background-white-header" mat-header-row *matHeaderRowDef="displayedColumnsComision"></tr>
                <tr class="background-white" mat-row *matRowDef="let row; columns: displayedColumnsComision;let i= index" cdkDrag [cdkDragData]="row"></tr>
        </table>
        
    </div>    
    <div (click)="newComision()" class="new-category cursor-pointer" fxLayout="row">
        <span>AGREGAR NUEVA CATEGORÍA</span>
    </div>
    <div class="mt-3 mb-3" fxLayout="row" fxLayoutAlign="end">
        <button mat-button class="mr-3" ngClass="button_cancel" (click)="onNoClick()"  
        > Cancelar </button>
        <button mat-raised-button class="button-save" (click)="saveComision()"   [disabled]="disabledButton"
        > Guardar </button>
    </div>
  </ng-template>
  