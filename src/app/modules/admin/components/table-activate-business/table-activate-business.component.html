
<div fxLayout="row" fxLayoutGap="15px" class="mb-3 mt-3">
    <div fxLayout="column" fxFlex="70">
        <table mat-table #table class="mat-elevation-z2"  
        [dataSource]="dataSource" 
        cdkDropList
        [cdkDropListData]="dataSource"
        (cdkDropListDropped)="dropTable($event)">
            <ng-container matColumnDef="drag">
                <th mat-header-cell *matHeaderCellDef> </th>
                <td mat-cell *matCellDef="let element;let i= index" > 
                    <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign.gt-xs="end center" fxLayoutAlign.xs="center center">
                        <mat-icon  matSuffix class="mr-1 blue cursor-pointer" cdkDragHandle>drag_indicator</mat-icon>
                    </div>
                </td>
            </ng-container>
            <ng-container matColumnDef="bussiness">
                <th mat-header-cell *matHeaderCellDef> {{ 'DASHBOARD.NEW_BUSINESS' | translate }} </th>
                <td mat-cell *matCellDef="let element"> 
                    <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign.gt-xs="start center" fxLayoutAlign.xs="center center">
                        <span fxLayout="column">
                            <img class="iconb" [src]="element.imageurl" [alt]="element.description">
                        </span>
                        <span fxLayout="column" class="galano-bold f-16" fxHide.xs="true">
                            {{ element.description }}
                        </span>
                    </div>
                </td>
            </ng-container>

            <ng-container matColumnDef="activate">
                <th mat-header-cell class="tr" *matHeaderCellDef> ACTIVO / INACTIVO </th>
                <td mat-cell *matCellDef="let element;let i= index"> 
                    <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign.gt-xs="end center" fxLayoutAlign.xs="center center">
                        <mat-slide-toggle [(ngModel)]="element.active" color="orange2-toggle" (change)="activate(element)"></mat-slide-toggle>
                    </div>
                </td>
            </ng-container>
            <ng-container matColumnDef="category">
                <th mat-header-cell  *matHeaderCellDef class="center-text"> CONFIGURAR </th>
                <td mat-cell *matCellDef="let element;let i= index"> 
                    <div fxLayout="row" fxLayoutGap="10px" fxLayoutAlign.gt-xs="center" fxLayoutAlign.xs="center center">
                        <button mat-button [matMenuTriggerFor]="menu"><img class="cursor-pointer "   src="/assets/img/dashboard/icon-settings.svg" alt=""></button>
                        <mat-menu #menu="matMenu" xPosition="before">
                          <button mat-menu-item (click)="editCategory(element)">Categorías</button>
                          <button mat-menu-item (click)="contentBussiness(element)">Biblioteca de Contenido</button>
                          <button mat-menu-item (click)="comisionTable(element)">Comisiones</button>
                        </mat-menu>
                            
                    </div>
                </td>
            </ng-container>
            
              <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumns;let i= index" cdkDrag [cdkDragData]="row"></tr>
        </table>
    </div>

</div>
<ng-template #templateComision>
    <div ngClass="comision-container">
        <div class="header-comision" fxLayout="row">
            <p class="header-category">CATEGORÍA DE PRODUCTO</p>
            <p class="header-standar">COMISIÓN</p>
            <p class="header-standar mr-2">ACCIONES</p>
        </div>
        <div class="content-comision mt-2" fxLayout="row" *ngFor="let item of dataComision">
            <mat-form-field style="width: 490px;">
                <input
                  matInput
                  id="category"
                  type="text"
                  placeholder="NOMBRE"
                  [(ngModel)]="item.description"
                  required
                />
            </mat-form-field>
            <mat-form-field style="width: 90px;">
                <input
                  matInput
                  id="category"
                  type="text"
                  placeholder="COMISIÓN"
                  [(ngModel)]="item.comision"
                  required
                />
            </mat-form-field>
            <button mat-button [matMenuTriggerFor]="menu"><img class="cursor-pointer "   src="/assets/img/dashboard/icon-settings.svg" alt=""></button>
        </div>
        <div (click)="newComision()" class="new-category cursor-pointer" fxLayout="row">
            <span>AGREGAR NUEVA CATEGORÍA</span>
        </div>
        <div class="mt-3 mb-3" fxLayout="row" fxLayoutAlign="end">
            <button mat-button ngClass="button_cancel" (click)="onNoClick()"  
            > Cancelar </button>
            <button mat-button class="button-save" (click)="onNoClick()"  
            > Guardar </button>
        </div>
    </div>    
  </ng-template>
  